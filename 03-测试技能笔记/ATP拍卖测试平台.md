# ATP平台

## 总体介绍

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2019/png/224970/1564386773089-b76eef44-119b-42a3-9c7c-ce168e274352.png?x-oss-process=image/resize,w_746)

### 都有什么功能？

1. 精准测试
2. 性能测试
3. 业务监控
4. UI自动化
5. 接口自动化
6. 数据工厂

## 业务监控

### 1 系统结构

系统架构上分为以下四个部分：

规则池->监控点->监控任务->监控集

#### 1.1 规则池

监控的验证点，例如某接口返回值的合理区间

#### 1.2 监控点

监控点：监控的最小检查点，如调用某一接口，检查其返回值是否符合某规则

- 一个监控点必须对应一条监控则
- 监控对象包括的类型：
  - 通用基类
  - 页面
  - datafront接口
  - datafront-V2接口
  - http-get
  - http-post

#### 1.3 监控任务

多个监控点的合集，用于监控某一业务逻辑，目前部分类型需通过自定义参数配置，部分类型匹配方式未知

#### 1.4 监控集

实际业务逻辑上的监控单元，需要添加一个或多个监控任务完成对某一业务逻辑/页面的监控



**系统使用者角色为：**

\1. 监控点管理员：整个系统的控制人，应具有超级权限（可任意修改和删除），对系统理解透彻，需理解所有高级参数设置（规则，接口，出入参，自定义JSON等）

\2. 监控任务使用者（模块测试负责人）：业务模块负责人，最了解细节业务需求，同时需要可以理解部分高级参数设置（目前同超级管理员）

\3. 监控集使用者（普通用户，如测试人员，vendor，运维等）：实际监控发起人和使用者，仅仅需要知道业务逻辑，不需要懂高级参数设置



备注：

全部评论的接口：微淘的：mtop.taobao.social.comment.list

获取热评的接口：洋淘的：mtop.taobao.beehive.detail.contentservicenewv2

# 关于专项

## 大家的分工

1. 验收平台（项目管理）：麦琪、保瞳
2. 性能：小菊、三笑
3. UI：顺河、一息
4. TDMS：原光
5. 日志链路：三笠
6. 标签：宝颜
7. 前端：一笠
8. 用例集合、前台通用管理、账号管理：天抒
9. 监控：悠酱
10. 慢aql治理：柔梳
11. 流程管理：柔梳

## 我的思考

**UI和监控**



主要针对前端页面展现：

1. 页面对比监控：每次提交代码，会自动对比页面之间的差异然后提醒测试人员注意回归。

   工作原理：就是利用phantom或其他headless浏览器访问页面，然后截图，然后执行一段js，遍历整个dom树，获取元素计算样式和元素内文本内容，构造出一个JSON结构，然后每次diff这个json来判断页面差异，并标记在截图上展示。dom树的diff过程有点类似react的虚拟dom树diff。

   需要识别的内容

   a. dom元素信息的差异，新增元素、删除元素、内容修改、样式修改

   b. 截图，获取差异

   c. 根据dom提供的位置信息进行截图和定位

   

   ​	